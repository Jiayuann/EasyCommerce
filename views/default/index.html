{{extend 'layout.html'}}
<link href="{{=URL('static', 'css/new.css')}}" rel="stylesheet" type="text/css" />
<link href="https://fonts.googleapis.com/css?family=Rubik|Open+Sans" rel="stylesheet">

<!--Banner for store, figure out how to adjust this-->
{{block header}}
    <header class="container-fluid background">
      <div class="jumbotron text-center">
        {{if response.title:}}
        <h1>{{=response.title}}
          <small>{{=response.subtitle or ''}}</small></h1>
        {{pass}}
      </div>
    </header>
{{end}}

<!--Creates a container for a single category. Each subsequent div represents
    another row of clickable images in the vendor's store. Needs database
    for image/price/name retrieval. Also adjust height. -->
<!-- Need to add javascript for image size adjustment -->
<html>

{{current = 0}}
{{i = 0}}
{{for type in categories:}}
    {{if type.category != current:}}
        <div id="section">
            {{current = type.category}}
            <h2 class="left_align"><u>{{=type.category}}</u></h2>
            {{for listing in listings:}}
                {{if current == listing.category:}}
                    {{if i%3==0 or i==0:}}
                        <div id="img_row" class="container">
                    {{pass}}

                    <div id="img_block">
                        <a href="{{=URL('EasyCommerce','default','item',args=[listing.id])}}">
                            <img class="center" src="{{=URL('download', args=listing.image)}}" />
                        <p class="left vertical">
                            {{=listing.item_name}}
                        </p>
                        <p class="right vertical">
                            ${{=listing.price}}
                        </p>
                        </a>
                    </div>

                    {{i = i+1}}
                    <!-- Close row div if at end of row-->
                    {{if i%3==0:}}
                        </div>
                    {{pass}}
                {{pass}}
            {{pass}}

            <!-- Close row div if at end of category but not end of row-->
            {{if i%3!=0:}}
                </div>
            {{pass}}
            {{i = 0}}
        </div>
    {{pass}}
{{pass}}
</br></br>
{{=A('Add item',_class='btn btn-info',_href=URL('EasyCommerce','default','add'))}}
</br>
</html>

<!-- Web2py footer? -->